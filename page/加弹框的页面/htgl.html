<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
	<meta http-equiv="Pragma" content="no-cache" />
	<meta http-equiv="Expires" content="0" />
    <meta name="keywords" content="">
    <link rel="stylesheet" href="../../assets/layui/css/layui.css">
    <link rel="stylesheet" href="../../assets/css/style.css">
    <title>合同管理</title>
</head>
<body>
    <div class="hcbox layui-form">
        <div class="hclit">
            <p class="hctitle">采购合同传输</p>
            <ul class="jlul layui-form clearfix">
                <li class="">
                    <div class="inlists">
                        <p class="dd-name">外围合同编号</p>
                        <div class="dd-value">
                            <input type="text" autocomplete="off" name="ht_num" value="">
                        </div>
                    </div>
                </li>
                <li class="">
                    <div class="inlists">
                        <p class="dd-name">采购组编码</p>
                        <div class="dd-value">
                            <select class="form-control input-sm" name="sap_cgz">
                                <option value="" selected="selected">请选择</option>
                                <option value="100">白育萍</option>
                                <option value="101">张建党</option>
                                <option value="102">赵海林</option>
                                <option value="103">王新党</option>
                                <option value="104">李毅鹏</option>
                                <option value="105">赵茂</option>
                                <option value="106">付朋朋</option>
                                <option value="107">赵彪</option>
                                <option value="108">李经现</option>
                                <option value="109">牛贵州</option>
                                <option value="110">赵海军</option>
                                <option value="111">赵华克</option>
                                <option value="112">王泽辉</option>
                                <option value="113">李晓峰</option>
                                <option value="114">焦洪安</option>
                                <option value="115">李虎威</option>
                                <option value="116">张龙义</option>
                                <option value="117">陈肖肖</option>
                                <option value="118">蒋正义</option>
                                <option value="119">李利涓</option>
                                <option value="120">李元博</option>
                                <option value="121">孙二燕</option>
                                <option value="124">郎双超</option>
                                <option value="125">赵志勇</option>
                            </select>
                        </div>
                    </div>
                </li>
                <li class="">
                    <div class="inlists">
                        <p class="dd-name">有效截至日期</p>
                        <div class="dd-value"> 
                            <input type="text" autocomplete="off" name="end_time" id="endt" value=""> 
                        </div>
                    </div>
                </li>
                <li class="">
                    <div class="inlists">
                        <p class="dd-name">供应商编码 <button class="listAdd" onclick="listAddDemo(1)">搜索</button></p>
                        <div class="dd-value">
                            <input type="text" autocomplete="off" name="sap_gys" >
                        </div>
                    </div>
                </li>
                <li class="">
                    <div class="inlists">
                        <p class="dd-name">有效期起始日期</p>
                        <div class="dd-value">
                            <input type="text" autocomplete="off" name="start_time" id="start" value=""> 
                        </div>
                    </div>
                </li>
                <li class="">
                    <div class="inlists">
                        <p class="dd-name">目标数量</p>
                        <div class="dd-value"> 
                            <input type="text" autocomplete="off" name="count" value=""> 
                        </div>
                    </div>
                </li>
                <li class="">
                    <div class="inlists">
                        <p class="dd-name">协议日期</p>
                        <div class="dd-value">
                            <input type="text" autocomplete="off" name="ht_time" id="htime" value=""> 
                        </div>
                    </div>
                </li>
                <li class="">
                    <div class="inlists">
                        <p class="dd-name">工厂编码</p>
                        <div class="dd-value"> 
                            <select class="form-control input-sm" name="sap_station">
                                <option value="" selected="selected">请选择</option>
                                <option value="1000">恒昌建材工厂</option>
                                <option value="1010">伟治建材工厂</option>
                                <option value="1020">松大建材工厂</option>
                                <option value="2000">山立建材工厂</option>
                                <option value="3000">建筑工程工厂</option>
                                <option value="5000">万昌运输工厂</option>
                                <option value="6000">恒昌复配工厂</option>
                                <option value="7000">恒昌资金工厂</option>
                                <option value="8000">恒昌行政工厂</option>
                            </select>
                        </div>
                    </div>
                </li>
                <li class="">
                    <div class="inlists">
                        <p class="dd-name">更改标识符</p>
                        <div class="dd-value">
                            <select class="" name="card" id="changeid">
                                <option value="I">创建</option>
                                <option value="U">修改</option>
                                <option value="D">删除</option>
                            </select>
                        </div>
                    </div>
                </li>
                <li class="">
                    <div class="inlists">
                        <p class="dd-name">采购组织编码</p>
                        <div class="dd-value"> 
                            <select class="" name="sap_cgzz">
                                <option value="" selected="selected">请选择</option>
                                <option value="1000">河南省恒昌建材科技有限公司</option>
                                <option value="1010">巩义市伟治建筑材料有限公司</option>
                                <option value="1020">河南省恒昌建材科技有限公司松大站</option>
                                <option value="2000">河南省山立建材科技有限公司</option>
                                <option value="3000">郑州银河建筑工程有限公司工程服务分公司</option>
                                <option value="5000">巩义市万昌运输有限公司</option>
                                <option value="6000">河南省恒昌商砼技术服务有限公司</option>
                                <option value="7000">恒昌集团资金事业部</option>
                                <option value="8000">恒昌集团行政事业部</option>
                                <option value="9000">河南元博软件有限公司</option>
                            </select>
                        </div>
                    </div>
                </li>
                <li class="">
                    <div class="inlists">
                        <p class="dd-name">物料编码 <button class="listAdd" onclick="listAddDemo(2)">搜索</button></p>
                        <div class="dd-value"> 
                            <input type="text" autocomplete="off" name="sap_material" value=""> 
                        </div>
                    </div>
                </li>
                <li>
                	<!-- <p class="dd-name"></p> -->
                    <div class="dd-value task-btnbox hcbig clearfix">
                        <div class="layui-inline" style="float:left">
                            <button class="hcbtn save">保存</button> 
                        </div>
                        <div class="layui-inline" style="float:left">
                            <button class="hcbtn reload">刷新</button> 
                        </div>
                    </div>
                </li>
            </ul>
        </div>
        <div style="margin:0 0 30px;padding-right:24px">
            <div class="layui-inline hcbig clearfix">
                <label class="layui-form-label">外围编号：</label>
                <div class="layui-input-inline">
                    <input type="text" placeholder="" name="wai_num" id="oa_num" autocomplete="off" class="layui-input bigInput">
                </div>
            </div>
            <div class="layui-inline hcbig clearfix">
                <label class="layui-form-label">供应商：</label>
                <div class="layui-input-inline">
                   <input type="text" placeholder="" name="supp_unit" id="gs_code" autocomplete="off" class="layui-input bigInput">
                </div>
            </div>
            <div class="layui-inline hcbig clearfix">
                <div class="layui-inline" style="float:left">
                    <button class="hcbtn search">搜索</button>
                </div>
            </div>
        </div>
        <div class="tablebb" style="padding-right:24px">
            <table class="layui-hide" id="ddtest" lay-filter="ddtest"></table>
        </div>
    </div>
    <script type="text/html" id="barDemo">
        <a lay-event="edit">编辑</a>
    </script>
    <script src="../../assets/layui/layui.all.js"></script>
    <script src="../../assets/jquery/jquery.min.js"></script>
    <script src="../../assets/js/echarts.js"></script>
    <script src="../../assets/js/bluebirds.js"></script>
    <script src="../../assets/js/common.js"></script>
    <script>
    var table = layui.table;
    var form = layui.form;
    var laydate = layui.laydate;

    // 点击保存
    $('body').on('click', '.save', function() {
        var data = formData();
        console.log(data);
    });

    //结束时间选择
    laydate.render({
        elem: "#endt",
        done: function (value, date) {
            
        }
    });
    //开始时间选择
    laydate.render({
        elem: "#start",
        done: function (value, date) {
            
        }
    });
    //开始时间选择
    laydate.render({
        elem: "#htime",
        done: function (value, date) {
            
        },
    });
    // 窗口大小改变事件
    window.onresize = function() {
        listReisze()
    }
    listReisze()
    var tableIns = tableRender({
        elem: '#ddtest',
        url: 'http://10.0.0.9:8008/admin/mmtest/get_cghtdata',
        cols: [
            [
				{field: 'ht_num', title: '外围合同编号', fixed: "left", width: 130},
                {field: 'sap_status', title: '传输状态', fixed: 'left', width: 100},
                {field: 'sap_back', title: 'SAP合同编号', width: 130},
                {field: 'supp_unit', title: '供应商', width: 150},
                {field: 'goods_spec', title: '物料名称', width: 100},
                {field: 'sap_gys', title: '供应商编码', width: 115},
                {field: 'sap_cgzz', title: '采购组织编码', width: 130},
                {field: 'sap_cgz', title: '采购组编码', width: 115},
                {field: 'sap_station', title: '工厂编码', width: 100},
                {field: 'sap_material', title: '物料编码', width: 100},
                {field: 'count', title: '目标数量', width: 100},
                {field: 'gh_status', title: '供货状态', width: 100},
                {field: 'ht_time', title: '合同日期', width: 100},
                {field: 'start_time', title: '起始日期', width: 100},
                {field: 'end_time', title: '截止日期', width: 100},
                {title: '操作', width: 70, toolbar: '#barDemo', fixed: "right", align: "center"}
            ]
        ],
        even: true,
        page: true,
        skin:'row',
        done: function() {
            
        }
    });

    // 表格数据编辑
    table.on('tool(ddtest)', function(obj) {
        if (obj.event == 'edit') {
            //编辑
            dataRender(obj.data)
            form.render()
        }
    });
    function listAddDemo(val){
		switch(val){
			case 1:
				title="供应商";
				laytplUrl="./htgl-gys.html";
				listAddtpl(title,laytplUrl);
				break;
			case 2:
				title="物料数据";
				laytplUrl="./htgl-wlbm.html";
				listAddtpl(title,laytplUrl);
				break;
			default:break;
			
		}
	}
	function listAddtpl(title,laytplUrl){
		layer.open({
			type:2,
			title:title,
			area:["50%","70%"],
			content:laytplUrl,
			success:(res) => {
			}
		})
	}
</script>
</body>
</html>